<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <title>Converte Imagem</title>
    <script src="https://kit.fontawesome.com/ee9790b7c3.js" crossorigin="anonymous"></script>

</head>
<style>
    body{
    height: 100vh;

    margin:0 auto;
    align-items: center;
    display:flex;
    justify-content: center;
    font-family: Arial;

    display:flex;
    justify-content: center;
    align-items: center;
    }
    h1{
    color: #064C9F;
    font-size: 25px;
    font-family: Arial;
    text-align: center;
    }
    #content{
    display:flex;
    flex-direction: column;
    align-items:center;



    justify-content: center;
    align-items: center;
    padding:20px;
    }
    input::file-selector-button{
    background-color: #064C9F;
    color: white;
    border: none;
    padding: 10px;
    border-radius: 5px 5px 5px 5px;
    font-weight: normal;
    }
    #botao{
    background-color: #064C9F;
    width:150px;
    color: white;
    padding:5px;
    border-radius: 10px;
    display: flex;
    justify-content: center;
    font-weight: bold;

    }
    a:link{
    color: white;
    text-decoration: none;
    font-family: Arial;

    }
    #content-inner{
    padding: 8px;
    border: 1px  dashed blue;
    border-radius: 5px;
    padding:20px;

    border-radius: 20px;
    background-color: white;

    }
    #content_list_images{
    display:flex;
    gap:40px;
    justify-content: space-between;
    align-items: center;
    background-color: white;
    padding:10px;
    margin-bottom: 20px;
    font-size:14px;
    border: 1px solid #064C9F;
    border-radius: 10px;
    }
    .item{


    }
    #btn_convert{
    background-color: #064C9F;
    padding:20px;
    border-radius:10px;
    display:flex;
    justify-content:center;
    font-weight: bold;

    }
    #btn_convert a{
    color:white;
    }
    #container-result{

    padding:10px;
    background-color: #B4BBD2;

    }
    #item-result{
    display:flex;
    background-color: white;
    padding:20px;
    font-size: 12px;
    border:1px solid #064C9F;
    align-items: center;


    justify-content: space-between;
    }
    #select{
    border: 1px solid #064C9F;
    border-radius: 5px;
    background-color: #B4BBD2;
    color: #064C9F;
    font-size: 16px;
    }


</style>

<body>

<div id="content">
    <div id="content-inner">


    <h1>Escolha o arquivo para convers√£o</h1>
    <form action="{{url_for('upload_file')}}"   method="POST" enctype="multipart/form-data">

        <input  type="file" id="file" name="file" onchange="this.form.submit()" />

        <pre id="fileContent"></pre>
        {% for image in images %}
        {% if status !=200 %}
       <div class="item">
        <div id="content_list_images">
              <div  id="name_image" >{{image['filename']}}</div>
            <select name="types" id="select" onchange="selectType(this)" >
            <option value="webp" selected>webp</option>
            <option value="png">png</option>
            <option value="jpg">jpg</option>
            <option value="gif">gif</option>
        </select>
        <a href="http://localhost:5000/delete?item={{image['filename']}}">
            <div ><i class="fa-solid fa-circle-xmark" style="color: #D33502; font-size: 25px;"></i></div>
        </a>
        </div>
        </div>

        {% endif %}

        {% endfor %}




        {% if status !=200 and up==True%}
         <div id="btn_convert">
            <a href="http://localhost:5000/getFiles">Converter Imagens</a>
        </div>
        {% endif %}



    </form>
        {% for image in images_download %}
         {% if status==200 %}
        <div id="container-result">
            <div id="item-result">
                 <div>{{image}}</div>
        <a href="http://localhost:5000/static/{{image}}"  download="http://localhost:5000/static/{{image}}">
            <div id="botao">
                Donwload
            </div>

        </a>
            </div>

        </div>


        {% endif %}
         {% endfor %}
 </div>
</div>


</body>
<script>

  document.getElementById("select").addEventListener("change", (e)=>
   {
    var file= e.target.parentElement.firstChild.nextElementSibling.innerHTML
    fetch(`http://localhost:5000/change_types?types=${e.target.value}&file=${file}`, {method: "POST"})
     console.log('mudei'
)
    }
   )

</script>








</html>